<!DOCTYPE html>
<html>
<head>
	<title> Bloguezinho </title>
	<link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
	<style type="text/css">


	* {
		font-family: 'Roboto'
	}
		
	.container {
		width: 100vw;
		height: 100vh;
		align-items: center;
		display: flex;
		justify-content: center;
		flex-direction: row;
	}

	.categorias {
		margin-right: 4%;
		display: flex;
		flex-direction: column;
		font-size: 22px;
		width: 16%;
		height: 50vh;
		background-color: lightblue;
		border: 1px solid black;	
	}
	.categorias div {
		height:100%;
		width: 100%;
		height: 6vh;
		background-color: white;		
	}

	.catTitulo {
		background-color: blue !important;
	}

	.topo {
		background-color: grey;
		position: fixed;
		height: 10%;
		width: 100%;
	}

	.posts {
		width: 80%;
		height: 50vh;
		background-color: lightblue;
		border: 1px solid black;
		text-align: left;
		display: flex;
		align-items: center;
		justify-content: center;
		flex-direction: column;
		font-size: 22px;
	}

	.posts div {
  		box-shadow: 0 3px 6px rgba(0,0,0,0.16), 0 3px 6px rgba(0,0,0,0.23);
		margin-bottom: 2vh;
		background-color: white;
		width: 90%;
		height: 14vh;
	}

	.posts div h2 {
		justify-content: center;
		text-align: center;
	}

	</style>
</head>
<body>
		<div class="topo"></div>

	<div class="container">
		
		<div class="categorias"><div class="catTitulo"></div></div>
		<div class="posts">

		</div>

	</div>

</body>

<script type="text/javascript">
	
	var categorias = document.querySelector("div.categorias");
	var posts = document.querySelector("div.posts");
		//posts.innerHTML = "";

	    async function buscarCat() {

            var request = await fetch('../api/categoria/read.php')
            var response = await request.json()
        

            response.forEach(categoria => {
            	console.log(categoria.id);
                
                categorias.innerHTML += "<div data-value="+ categoria.id +">"+ categoria.nome +"</div>"

            })
        } 

        buscarCat()

        categorias.addEventListener('click', ev => {

        	console.log(event.target.dataset.value)

	    	async function buscarPost() {

	    	posts.innerHTML = "";

            	var request = await fetch('../api/post/read.php?id_categoria='+event.target.dataset.value+'')
            	var response = await request.json()
        

            	response.forEach(post => {
            	//alert("112");
            		posts.innerHTML += "<div><h2>"+post.titulo+"</h2><h3>"+post.texto+"</h3></div>"

            	})
        	} 

        	buscarPost()

        })

</script>

</html>